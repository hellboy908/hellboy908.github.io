<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <title>Змейка</title>
  <style>
    body { background: #111; margin: 0; display: flex; flex-direction: column; align-items: center; color: #fff; font-family: Arial, sans-serif; }
    canvas { background: #222; margin-top: 20px; }
    h1 { margin-top: 20px; }
  </style>
</head>
<body>
  <h1>Змейка</h1>
  <canvas id="game" width="400" height="400"></canvas>
  <p><a href="../categories.html">← Назад к категориям</a></p>

  <script>
    const canvas = document.getElementById("game");
    const ctx = canvas.getContext("2d");
    const grid = 20, count = canvas.width / grid;
    let snake = [{x:10, y:10}], dx=1, dy=0, food={x:15,y:15}, interval;

    function drawCell(x,y,color) {
      ctx.fillStyle = color;
      ctx.fillRect(x*grid, y*grid, grid-2, grid-2);
    }

    function gameLoop() {
      const head = {x: snake[0].x + dx, y: snake[0].y + dy};
      if(head.x<0||head.x>=count||head.y<0||head.y>=count||snake.some(s=>s.x===head.x&&s.y===head.y)) {
        clearInterval(interval);
        alert("Game Over!");
        return;
      }
      snake.unshift(head);
      if(head.x===food.x&&head.y===food.y) placeFood();
      else snake.pop();
      ctx.clearRect(0,0,canvas.width,canvas.height);
      drawCell(food.x,food.y,"red");
      snake.forEach((seg, i)=> drawCell(seg.x,seg.y, i===0 ? "lime" : "green"));
    }

    function placeFood() {
      food.x = Math.floor(Math.random()*count);
      food.y = Math.floor(Math.random()*count);
    }

    document.addEventListener("keydown", e => {
      if (["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"].includes(e.code)) e.preventDefault();
      if(e.code==="ArrowUp"&&dy===0){dx=0;dy=-1;}
      if(e.code==="ArrowDown"&&dy===0){dx=0;dy=1;}
      if(e.code==="ArrowLeft"&&dx===0){dx=-1;dy=0;}
      if(e.code==="ArrowRight"&&dx===0){dx=1;dy=0;}
    });

    placeFood();
    interval = setInterval(gameLoop, 150);
  </script>
</body>
</html>
